version: 1

AppDir:
  path: ./AppDir

  app_info:
    id: com.turnlab.TurnLab
    name: TurnLab
    icon: turnlab
    version: latest
    exec: usr/bin/TurnLab
    exec_args: $@

  apt:
    arch: amd64
    sources:
      - sourceline: 'deb http://archive.ubuntu.com/ubuntu/ noble main restricted universe multiverse'
      - sourceline: 'deb http://archive.ubuntu.com/ubuntu/ noble-updates main restricted universe multiverse'

    include:
      - libqt6core6
      - libqt6gui6
      - libqt6widgets6
      - libqt6svg6
      - libspdlog1.12
      - libfmt9
      - python3
      - python3-minimal
      - libpython3.12
    exclude:
      - adwaita-icon-theme
      - humanity-icon-theme

  files:
    include:
      - usr/bin/TurnLab
      - /usr/local/qwt-6.3.1-dev/lib/libqwt.so*

    exclude:
      - usr/share/man
      - usr/share/doc/*/README.*
      - usr/share/doc/*/changelog.*
      - usr/share/doc/*/NEWS.*
      - usr/share/doc/*/TODO.*

  runtime:
    env:
      QT_QPA_PLATFORM_PLUGIN_PATH: $APPDIR/usr/lib/qt6/plugins
      LD_LIBRARY_PATH: '$APPDIR/usr/lib:$APPDIR/usr/lib/x86_64-linux-gnu:$APPDIR/lib/x86_64-linux-gnu:$LD_LIBRARY_PATH'

  test:
    fedora-30:
      image: appimagecrafters/tests-env:fedora-30
      command: ./AppRun --help
    debian-stable:
      image: appimagecrafters/tests-env:debian-stable
      command: ./AppRun --help
    ubuntu-xenial:
      image: appimagecrafters/tests-env:ubuntu-xenial
      command: ./AppRun --help

AppImage:
  arch: x86_64
  update-information: guess